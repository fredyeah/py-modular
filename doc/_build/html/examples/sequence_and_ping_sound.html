

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>3. Create a ping sound with multiple fm controls &mdash; py-modular  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="4. Using more effects and programmatic sound system creation" href="multi_delay.html" />
    <link rel="prev" title="2. How to create a basic kick drum with pitch and gain envelopes" href="simple_kick_drum.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> py-modular
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../api.html">API</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Examples</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="random_sine_wave.html">1. How to create a sine wave with random pitch oscillation</a></li>
<li class="toctree-l2"><a class="reference internal" href="simple_kick_drum.html">2. How to create a basic kick drum with pitch and gain envelopes</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">3. Create a ping sound with multiple fm controls</a></li>
<li class="toctree-l2"><a class="reference internal" href="multi_delay.html">4. Using more effects and programmatic sound system creation</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">py-modular</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">Examples</a> &raquo;</li>
        
      <li><span class="section-number">3. </span>Create a ping sound with multiple fm controls</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/examples/sequence_and_ping_sound.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="create-a-ping-sound-with-multiple-fm-controls">
<h1><span class="section-number">3. </span>Create a ping sound with multiple fm controls<a class="headerlink" href="#create-a-ping-sound-with-multiple-fm-controls" title="Permalink to this headline">¶</a></h1>
<p>For this tutorial, we need to import the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">py_modular.time.transport</span> <span class="kn">import</span> <span class="n">GlobalTransport</span>
<span class="kn">from</span> <span class="nn">py_modular.sound.oscillators</span> <span class="kn">import</span> <span class="n">Tri</span><span class="p">,</span> <span class="n">Random</span>
<span class="kn">from</span> <span class="nn">py_modular.effects.mixer</span> <span class="kn">import</span> <span class="n">Atten</span>
<span class="kn">from</span> <span class="nn">py_modular.time.events</span> <span class="kn">import</span> <span class="n">TriggerEvent</span>
<span class="kn">from</span> <span class="nn">py_modular.time.envelopes</span> <span class="kn">import</span> <span class="n">ExpEnv</span>
<span class="kn">from</span> <span class="nn">py_modular.time.transport</span> <span class="kn">import</span> <span class="n">EventSequencer</span>
</pre></div>
</div>
<p>First, we will create our envelopes which you should be familiar with.
This time, we will also use the <cite>ExpEnv</cite> in tandem with the <cite>Random</cite> oscillator.
We will use one envelope to control a slight pitch variation over time, one to control a attack/decay type movement with pitch, and one to control gain.
The <cite>ExpEnv</cite> class is unique because it can be controlled using an event sequencer or event handler.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pitch_variation</span> <span class="o">=</span> <span class="n">Random</span><span class="p">(</span><span class="n">freq</span><span class="o">=</span><span class="mf">0.76</span><span class="p">,</span> <span class="n">gain</span><span class="o">=</span><span class="mf">50.0</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mf">100.0</span><span class="p">)</span>
<span class="n">pitch_envelope</span> <span class="o">=</span> <span class="n">ExpEnv</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">gain</span><span class="o">=</span><span class="mf">10.0</span><span class="p">,</span> <span class="n">curve_gain</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)</span>
<span class="n">gain_envelope</span> <span class="o">=</span> <span class="n">ExpEnv</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">curve_gain</span><span class="o">=</span><span class="mf">0.92</span><span class="p">)</span>
</pre></div>
</div>
<p>To control the pitch and gain attack/decay envelopes, we will use a <cite>TriggerEvent</cite>.
Both envelopes can be placed into the same trigger event so that they fire at the same time.
An <cite>EventSequencer</cite> is then used to control when the event is fired.
An array of arbitrary length is used to determine when events are fired.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The sequence parameter of the <cite>EventSequencer</cite> class controls when the events are fired.
If the sequence is <cite>[900, 100, 300]</cite>, the first event will fire at 900 samples, the second event will fire 100 samples after the first event, the third event will fire 300 samples after the second event, etc…</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">trigger</span> <span class="o">=</span> <span class="n">TriggerEvent</span><span class="p">([</span><span class="n">pitch_envelope</span><span class="p">,</span> <span class="n">gain_envelope</span><span class="p">])</span>
<span class="n">sequencer</span> <span class="o">=</span> <span class="n">EventSequencer</span><span class="p">([</span><span class="n">trigger</span><span class="p">],</span> <span class="n">sequence</span><span class="o">=</span><span class="p">[</span><span class="mi">48000</span><span class="p">,</span> <span class="mi">60000</span><span class="p">,</span> <span class="mi">47000</span><span class="p">])</span>
</pre></div>
</div>
<p>We will then build the ping sound with a triangle wave.
We can assign the gain envelope to the triangle’s <cite>gainct</cite>, and we can just put both pitch envelopes in a list and assign it to the <cite>fmct</cite>.
They will both control the frequency.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ping_sound</span> <span class="o">=</span> <span class="n">Tri</span><span class="p">(</span><span class="n">freq</span><span class="o">=</span><span class="mf">250.0</span><span class="p">,</span> <span class="n">gain</span><span class="o">=</span><span class="mf">0.75</span><span class="p">,</span> <span class="n">gainct</span><span class="o">=</span><span class="n">gain_envelope</span><span class="p">,</span> <span class="n">fmct</span><span class="o">=</span><span class="p">[</span><span class="n">pitch_envelope</span><span class="p">,</span> <span class="n">pitch_variation</span><span class="p">])</span>
</pre></div>
</div>
<p>Last, we follow the same steps as before to initiate the global transport and start it.
This time, however, we also have some seuqnces that we want to fire during the session.
We can put the sequencer into a list and assign it as one of the event handlers in the global transport.
This will make sure that the events are synced to the session on a sample by sample basis.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">global_transport</span> <span class="o">=</span> <span class="n">GlobalTransport</span><span class="p">([</span><span class="n">sequencer</span><span class="p">])</span>
<span class="n">global_transport</span><span class="o">.</span><span class="n">chs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">ping_sound</span><span class="p">)</span>
<span class="n">global_transport</span><span class="o">.</span><span class="n">chs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">ping_sound</span><span class="p">)</span>

<span class="n">global_transport</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</pre></div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="multi_delay.html" class="btn btn-neutral float-right" title="4. Using more effects and programmatic sound system creation" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="simple_kick_drum.html" class="btn btn-neutral float-left" title="2. How to create a basic kick drum with pitch and gain envelopes" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, fredyeah.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>