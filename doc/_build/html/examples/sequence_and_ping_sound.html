
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>3. Create a ping sound with multiple fm controls &#8212; py-modular  documentation</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet" />
  <link href="../_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    
  <link rel="preload" as="script" href="../_static/js/index.1c5a1a01449ed65a7b51.js">

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="4. Using more effects and programmatic sound system creation" href="multi_delay.html" />
    <link rel="prev" title="2. How to create a basic kick drum with pitch and gain envelopes" href="simple_kick_drum.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    
<a class="navbar-brand" href="../index.html">
<p class="title">py-modular</p>
</a>

    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../api.html">
  API
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="index.html">
  Examples
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="random_sine_wave.html">
   1. How to create a sine wave with random pitch oscillation
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="simple_kick_drum.html">
   2. How to create a basic kick drum with pitch and gain envelopes
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   3. Create a ping sound with multiple fm controls
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="multi_delay.html">
   4. Using more effects and programmatic sound system creation
  </a>
 </li>
</ul>

  </div>
</nav>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                

<nav id="bd-toc-nav">
    
</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="create-a-ping-sound-with-multiple-fm-controls">
<h1><span class="section-number">3. </span>Create a ping sound with multiple fm controls<a class="headerlink" href="#create-a-ping-sound-with-multiple-fm-controls" title="Permalink to this headline">¶</a></h1>
<p>For this tutorial, we need to import the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">py_modular.time.transport</span> <span class="kn">import</span> <span class="n">GlobalTransport</span>
<span class="kn">from</span> <span class="nn">py_modular.sound.oscillators</span> <span class="kn">import</span> <span class="n">Tri</span><span class="p">,</span> <span class="n">Random</span>
<span class="kn">from</span> <span class="nn">py_modular.effects.mixer</span> <span class="kn">import</span> <span class="n">Atten</span>
<span class="kn">from</span> <span class="nn">py_modular.time.events</span> <span class="kn">import</span> <span class="n">TriggerEvent</span>
<span class="kn">from</span> <span class="nn">py_modular.time.envelopes</span> <span class="kn">import</span> <span class="n">ExpEnv</span>
<span class="kn">from</span> <span class="nn">py_modular.time.transport</span> <span class="kn">import</span> <span class="n">EventSequencer</span>
</pre></div>
</div>
<p>First, we will create our envelopes which you should be familiar with.
This time, we will also use the <cite>ExpEnv</cite> in tandem with the <cite>Random</cite> oscillator.
We will use one envelope to control a slight pitch variation over time, one to control a attack/decay type movement with pitch, and one to control gain.
The <cite>ExpEnv</cite> class is unique because it can be controlled using an event sequencer or event handler.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pitch_variation</span> <span class="o">=</span> <span class="n">Random</span><span class="p">(</span><span class="n">freq</span><span class="o">=</span><span class="mf">0.76</span><span class="p">,</span> <span class="n">gain</span><span class="o">=</span><span class="mf">50.0</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="mf">100.0</span><span class="p">)</span>
<span class="n">pitch_envelope</span> <span class="o">=</span> <span class="n">ExpEnv</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">gain</span><span class="o">=</span><span class="mf">10.0</span><span class="p">,</span> <span class="n">curve_gain</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)</span>
<span class="n">gain_envelope</span> <span class="o">=</span> <span class="n">ExpEnv</span><span class="p">(</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">curve_gain</span><span class="o">=</span><span class="mf">0.92</span><span class="p">)</span>
</pre></div>
</div>
<p>To control the pitch and gain attack/decay envelopes, we will use a <cite>TriggerEvent</cite>.
Both envelopes can be placed into the same trigger event so that they fire at the same time.
An <cite>EventSequencer</cite> is then used to control when the event is fired.
An array of arbitrary length is used to determine when events are fired.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The sequence parameter of the <cite>EventSequencer</cite> class controls when the events are fired.
If the sequence is <cite>[900, 100, 300]</cite>, the first event will fire at 900 samples, the second event will fire 100 samples after the first event, the third event will fire 300 samples after the second event, etc…</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">trigger</span> <span class="o">=</span> <span class="n">TriggerEvent</span><span class="p">([</span><span class="n">pitch_envelope</span><span class="p">,</span> <span class="n">gain_envelope</span><span class="p">])</span>
<span class="n">sequencer</span> <span class="o">=</span> <span class="n">EventSequencer</span><span class="p">([</span><span class="n">trigger</span><span class="p">],</span> <span class="n">sequence</span><span class="o">=</span><span class="p">[</span><span class="mi">48000</span><span class="p">,</span> <span class="mi">60000</span><span class="p">,</span> <span class="mi">47000</span><span class="p">])</span>
</pre></div>
</div>
<p>We will then build the ping sound with a triangle wave.
We can assign the gain envelope to the triangle’s <cite>gainct</cite>, and we can just put both pitch envelopes in a list and assign it to the <cite>fmct</cite>.
They will both control the frequency.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ping_sound</span> <span class="o">=</span> <span class="n">Tri</span><span class="p">(</span><span class="n">freq</span><span class="o">=</span><span class="mf">250.0</span><span class="p">,</span> <span class="n">gain</span><span class="o">=</span><span class="mf">0.75</span><span class="p">,</span> <span class="n">gainct</span><span class="o">=</span><span class="n">gain_envelope</span><span class="p">,</span> <span class="n">fmct</span><span class="o">=</span><span class="p">[</span><span class="n">pitch_envelope</span><span class="p">,</span> <span class="n">pitch_variation</span><span class="p">])</span>
</pre></div>
</div>
<p>Last, we follow the same steps as before to initiate the global transport and start it.
This time, however, we also have some seuqnces that we want to fire during the session.
We can put the sequencer into a list and assign it as one of the event handlers in the global transport.
This will make sure that the events are synced to the session on a sample by sample basis.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">global_transport</span> <span class="o">=</span> <span class="n">GlobalTransport</span><span class="p">([</span><span class="n">sequencer</span><span class="p">])</span>
<span class="n">global_transport</span><span class="o">.</span><span class="n">chs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">ping_sound</span><span class="p">)</span>
<span class="n">global_transport</span><span class="o">.</span><span class="n">chs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">ping_sound</span><span class="p">)</span>

<span class="n">global_transport</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</pre></div>
</div>
</div>


              </div>
              
              
              <div class='prev-next-bottom'>
                
    <a class='left-prev' id="prev-link" href="simple_kick_drum.html" title="previous page"><span class="section-number">2. </span>How to create a basic kick drum with pitch and gain envelopes</a>
    <a class='right-next' id="next-link" href="multi_delay.html" title="next page"><span class="section-number">4. </span>Using more effects and programmatic sound system creation</a>

              </div>
              
          </main>
          

      </div>
    </div>
  
  <script src="../_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  <footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2021, fredyeah.<br/>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.5.4.<br/>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>