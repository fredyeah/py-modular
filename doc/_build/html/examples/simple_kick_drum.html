
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>2. How to create a basic kick drum with pitch and gain envelopes &#8212; py-modular  documentation</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet" />
  <link href="../_static/css/index.c5995385ac14fb8791e8eb36b4908be2.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    
  <link rel="preload" as="script" href="../_static/js/index.1c5a1a01449ed65a7b51.js">

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="3. Create a ping sound with multiple fm controls" href="sequence_and_ping_sound.html" />
    <link rel="prev" title="1. How to create a sine wave with random pitch oscillation" href="random_sine_wave.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
    
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <div class="container-fluid" id="banner"></div>

    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">

  <div id="navbar-start">
    
    
<a class="navbar-brand" href="../index.html">
<p class="title">py-modular</p>
</a>

    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../api.html">
  API
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="index.html">
  Examples
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="random_sine_wave.html">
   1. How to create a sine wave with random pitch oscillation
  </a>
 </li>
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   2. How to create a basic kick drum with pitch and gain envelopes
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="sequence_and_ping_sound.html">
   3. Create a ping sound with multiple fm controls
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="multi_delay.html">
   4. Using more effects and programmatic sound system creation
  </a>
 </li>
</ul>

  </div>
</nav>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
            
              
              <div class="toc-item">
                

<nav id="bd-toc-nav">
    
</nav>
              </div>
              
              <div class="toc-item">
                
              </div>
              
            
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="how-to-create-a-basic-kick-drum-with-pitch-and-gain-envelopes">
<h1><span class="section-number">2. </span>How to create a basic kick drum with pitch and gain envelopes<a class="headerlink" href="#how-to-create-a-basic-kick-drum-with-pitch-and-gain-envelopes" title="Permalink to this headline">Â¶</a></h1>
<p>First, we need to import some oscillators and the <cite>GlobalTransport</cite>, like in the previous tutorial.
We will also need some effects processors to control gain and signal linearity.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">py_modular.sound.oscillators</span> <span class="kn">import</span> <span class="n">Sine</span><span class="p">,</span> <span class="n">Saw</span>
<span class="kn">from</span> <span class="nn">py_modular.effects.mixer</span> <span class="kn">import</span> <span class="n">Atten</span><span class="p">,</span> <span class="n">LinToExp</span>
<span class="kn">from</span> <span class="nn">py_modular.time.transport</span> <span class="kn">import</span> <span class="n">GlobalTransport</span>
</pre></div>
</div>
<p>We will start by writing a quick wrapper to easily create envelopes.
For the purpose of this tutorial, we will be shaping a saw wave and using it as an envelope, but there are many other ways it could be done.
Since we want our envelopes to go from high to low, we will apply a gain of -1.0 to the saw signal to invert it.
After creating a saw wave, we can use the <cite>LinToExp</cite> effect node to shape the wave.
Adding a curve parameter to the processor will allow us to turn a linear signal into an exponential or logarithmic-type signal.
Lastly, we will put the signal through an attenuator.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">create_envelope</span><span class="p">(</span><span class="n">freq</span><span class="p">,</span> <span class="n">curve</span><span class="p">,</span> <span class="n">gain</span><span class="p">,</span> <span class="n">offset</span><span class="p">):</span>
    <span class="n">envelope_base</span> <span class="o">=</span> <span class="n">Saw</span><span class="p">(</span><span class="n">freq</span><span class="o">=</span><span class="n">freq</span><span class="p">,</span> <span class="n">gain</span><span class="o">=-</span><span class="mf">1.0</span><span class="p">)</span>
    <span class="n">curved_envelope</span> <span class="o">=</span> <span class="n">LinToExp</span><span class="p">(</span><span class="n">envelope_base</span><span class="p">,</span> <span class="n">curve</span><span class="p">)</span>
    <span class="n">offset_envelope</span> <span class="o">=</span> <span class="n">Atten</span><span class="p">(</span><span class="n">curved_envelope</span><span class="p">,</span> <span class="n">gain</span><span class="o">=</span><span class="n">gain</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="n">offset</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">offset_envelope</span>
</pre></div>
</div>
<p>For the gain envelope, we want the gain to be above 0, since a negative gain will only invert the wave.
Since the saw wave we are basing these envelopes on oscillate between -1.0 and 1.0, we need a gain and offset of 0.5 to transform the signal into the 0.0 to 1.0 range.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">gain_envelope</span> <span class="o">=</span> <span class="n">create_envelope</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>
</pre></div>
</div>
<p>For the pitch envelope, since we are working in Hz, we will increase the gain and offset substantially, so we can be sure it will be in our auditory range.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pitch_envelope</span> <span class="o">=</span> <span class="n">create_envelope</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p>To complete the kick, we will use another sine wave as a base and apply the gain and pitch envelopes correspondingly.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">kick</span> <span class="o">=</span> <span class="n">Sine</span><span class="p">(</span><span class="n">freq</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">gainct</span><span class="o">=</span><span class="n">gain_envelope</span><span class="p">,</span> <span class="n">fmct</span><span class="o">=</span><span class="p">[</span><span class="n">pitch_envelope</span><span class="p">])</span>
</pre></div>
</div>
<p>To complete it, we can follow the same steps as the last tutorial to play our audio.
Put everything in the global transport, then run <cite>python simple_kick_drum.py</cite> and you should hear a kick sound.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">global_transport</span> <span class="o">=</span> <span class="n">GlobalTransport</span><span class="p">([])</span>
<span class="n">global_transport</span><span class="o">.</span><span class="n">chs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">kick</span><span class="p">)</span>
<span class="n">global_transport</span><span class="o">.</span><span class="n">chs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">kick</span><span class="p">)</span>

<span class="n">global_transport</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</pre></div>
</div>
</div>


              </div>
              
              
              <div class='prev-next-bottom'>
                
    <a class='left-prev' id="prev-link" href="random_sine_wave.html" title="previous page"><span class="section-number">1. </span>How to create a sine wave with random pitch oscillation</a>
    <a class='right-next' id="next-link" href="sequence_and_ping_sound.html" title="next page"><span class="section-number">3. </span>Create a ping sound with multiple fm controls</a>

              </div>
              
          </main>
          

      </div>
    </div>
  
  <script src="../_static/js/index.1c5a1a01449ed65a7b51.js"></script>

  <footer class="footer mt-5 mt-md-0">
  <div class="container">
    
    <div class="footer-item">
      <p class="copyright">
    &copy; Copyright 2021, fredyeah.<br/>
</p>
    </div>
    
    <div class="footer-item">
      <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.5.4.<br/>
</p>
    </div>
    
  </div>
</footer>
  </body>
</html>