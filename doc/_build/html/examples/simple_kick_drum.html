

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>2. How to create a basic kick drum with pitch and gain envelopes &mdash; py-modular  documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="3. Create a ping sound with multiple fm controls" href="sequence_and_ping_sound.html" />
    <link rel="prev" title="1. How to create a sine wave with random pitch oscillation" href="random_sine_wave.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> py-modular
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../api.html">API</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Examples</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="random_sine_wave.html">1. How to create a sine wave with random pitch oscillation</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">2. How to create a basic kick drum with pitch and gain envelopes</a></li>
<li class="toctree-l2"><a class="reference internal" href="sequence_and_ping_sound.html">3. Create a ping sound with multiple fm controls</a></li>
</ul>
</li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">py-modular</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="index.html">Examples</a> &raquo;</li>
        
      <li><span class="section-number">2. </span>How to create a basic kick drum with pitch and gain envelopes</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/examples/simple_kick_drum.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="how-to-create-a-basic-kick-drum-with-pitch-and-gain-envelopes">
<h1><span class="section-number">2. </span>How to create a basic kick drum with pitch and gain envelopes<a class="headerlink" href="#how-to-create-a-basic-kick-drum-with-pitch-and-gain-envelopes" title="Permalink to this headline">Â¶</a></h1>
<p>First, we need to import some oscillators and the <cite>GlobalTransport</cite>, like in the previous tutorial.
We will also need some effects processors to control gain and signal linearity.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">py_modular.sound.oscillators</span> <span class="kn">import</span> <span class="n">Sine</span><span class="p">,</span> <span class="n">Saw</span>
<span class="kn">from</span> <span class="nn">py_modular.effects.mixer</span> <span class="kn">import</span> <span class="n">Atten</span><span class="p">,</span> <span class="n">LinToExp</span>
<span class="kn">from</span> <span class="nn">py_modular.time.transport</span> <span class="kn">import</span> <span class="n">GlobalTransport</span>
</pre></div>
</div>
<p>We will start by writing a quick wrapper to easily create envelopes.
For the purpose of this tutorial, we will be shaping a saw wave and using it as an envelope, but there are many other ways it could be done.
Since we want our envelopes to go from high to low, we will apply a gain of -1.0 to the saw signal to invert it.
After creating a saw wave, we can use the <cite>LinToExp</cite> effect node to shape the wave.
Adding a curve parameter to the processor will allow us to turn a linear signal into an exponential or logarithmic-type signal.
Lastly, we will put the signal through an attenuator.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">create_envelope</span><span class="p">(</span><span class="n">freq</span><span class="p">,</span> <span class="n">curve</span><span class="p">,</span> <span class="n">gain</span><span class="p">,</span> <span class="n">offset</span><span class="p">):</span>
    <span class="n">envelope_base</span> <span class="o">=</span> <span class="n">Saw</span><span class="p">(</span><span class="n">freq</span><span class="o">=</span><span class="n">freq</span><span class="p">,</span> <span class="n">gain</span><span class="o">=-</span><span class="mf">1.0</span><span class="p">)</span>
    <span class="n">curved_envelope</span> <span class="o">=</span> <span class="n">LinToExp</span><span class="p">(</span><span class="n">envelope_base</span><span class="p">,</span> <span class="n">curve</span><span class="p">)</span>
    <span class="n">offset_envelope</span> <span class="o">=</span> <span class="n">Atten</span><span class="p">(</span><span class="n">curved_envelope</span><span class="p">,</span> <span class="n">gain</span><span class="o">=</span><span class="n">gain</span><span class="p">,</span> <span class="n">offset</span><span class="o">=</span><span class="n">offset</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">offset_envelope</span>
</pre></div>
</div>
<p>For the gain envelope, we want the gain to be above 0, since a negative gain will only invert the wave.
Since the saw wave we are basing these envelopes on oscillate between -1.0 and 1.0, we need a gain and offset of 0.5 to transform the signal into the 0.0 to 1.0 range.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">gain_envelope</span> <span class="o">=</span> <span class="n">create_envelope</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.8</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">,</span> <span class="mf">0.5</span><span class="p">)</span>
</pre></div>
</div>
<p>For the pitch envelope, since we are working in Hz, we will increase the gain and offset substantially, so we can be sure it will be in our auditory range.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">pitch_envelope</span> <span class="o">=</span> <span class="n">create_envelope</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mf">0.9</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
</pre></div>
</div>
<p>To complete the kick, we will use another sine wave as a base and apply the gain and pitch envelopes correspondingly.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">kick</span> <span class="o">=</span> <span class="n">Sine</span><span class="p">(</span><span class="n">freq</span><span class="o">=</span><span class="mi">60</span><span class="p">,</span> <span class="n">gainct</span><span class="o">=</span><span class="n">gain_envelope</span><span class="p">,</span> <span class="n">fmct</span><span class="o">=</span><span class="p">[</span><span class="n">pitch_envelope</span><span class="p">])</span>
</pre></div>
</div>
<p>To complete it, we can follow the same steps as the last tutorial to play our audio.
Put everything in the global transport, then run <cite>python simple_kick_drum.py</cite> and you should hear a kick sound.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">global_transport</span> <span class="o">=</span> <span class="n">GlobalTransport</span><span class="p">([])</span>
<span class="n">global_transport</span><span class="o">.</span><span class="n">chs</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">kick</span><span class="p">)</span>
<span class="n">global_transport</span><span class="o">.</span><span class="n">chs</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">add_node</span><span class="p">(</span><span class="n">kick</span><span class="p">)</span>

<span class="n">global_transport</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</pre></div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="sequence_and_ping_sound.html" class="btn btn-neutral float-right" title="3. Create a ping sound with multiple fm controls" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="random_sine_wave.html" class="btn btn-neutral float-left" title="1. How to create a sine wave with random pitch oscillation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, fredyeah.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>